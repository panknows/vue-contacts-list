(function(){"use strict";var t={5774:function(t,e,a){var s=a(8935),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],r=a(1001),i={},l=(0,r.Z)(i,n,o,!1,null,null,null),c=l.exports,u=a(2809),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},m=[],f={name:"IndexView"},h=f,p=(0,r.Z)(h,d,m,!1,null,null,null),b=p.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"pt-5"},[a("b-row",{attrs:{cols:"1"}},[a("b-col",[a("b-button",{attrs:{variant:"outline-primary",size:"lg",block:""},on:{click:t.toggleCreateContactModal}},[t._v(" Add contact ")])],1),a("b-col",{staticClass:"mt-3"},[a("VSearch",{attrs:{items:t.contacts.data,"search-by-property":"name"},on:{active:function(e){return t.search.isActive=e}},model:{value:t.search.data,callback:function(e){t.$set(t.search,"data",e)},expression:"search.data"}})],1),a("b-col",{staticClass:"mt-3"},[a("VContactsList",{attrs:{items:t.contactsItems}})],1)],1),a("b-modal",{attrs:{"hide-footer":""},model:{value:t.isModalCreateOpen,callback:function(e){t.isModalCreateOpen=e},expression:"isModalCreateOpen"}},[a("VContactForm",{ref:"form",on:{submit:t.onSubmitCreateContact},scopedSlots:t._u([{key:"footer",fn:function(){return[a("div",{staticClass:"mt-4"},[a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Create")]),a("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:t.toggleCreateContactModal}},[t._v(" Cancel ")])],1)]},proxy:!0}])})],1)],1)},C=[],g=a(4665),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[a("div",[a("b-form-group",{attrs:{label:"Name:","label-for":"name"}},[a("b-form-input",{attrs:{id:"name",autofocus:"",placeholder:"Enter name",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("div",{staticClass:"border-bottom mb-2 border-primary"},t._l(t.form.phones,(function(e,s){return a("b-form-group",{key:s,attrs:{label:"Phone:","label-for":"phone"}},[a("b-form-input",{attrs:{id:"phone",placeholder:"Enter phone"},on:{input:function(a){return t.onPhoneInput(e)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),t.form.phones.length>1&&s+1!==t.form.phones.length?a("b-button",{staticClass:"mt-2",attrs:{variant:"outline-danger",size:"sm"},on:{click:function(a){return t.removeField(e)}}},[a("BIconX"),t._v(" Remove field ")],1):t._e()],1)})),1),a("div",{staticClass:"border-bottom mb-2 border-primary"},t._l(t.form.emails,(function(e,s){return a("b-form-group",{key:s,attrs:{label:"Email:","label-for":"email-"+s}},[a("b-form-input",{attrs:{id:"email-"+s,type:"email",placeholder:"Enter email"},on:{input:function(a){return t.onEmailInput(e)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),t.form.emails.length>1&&s+1!==t.form.emails.length?a("b-button",{staticClass:"mt-2",attrs:{variant:"outline-danger",size:"sm"},on:{click:function(a){return t.removeField(e)}}},[a("BIconX"),t._v(" Remove field ")],1):t._e()],1)})),1),a("div",t._l(t.form.addresses,(function(e,s){return a("b-form-group",{key:s,attrs:{label:"Address:","label-for":"address-"+s}},[a("b-form-input",{attrs:{id:"address-"+s,placeholder:"Enter address"},on:{input:function(a){return t.onAddressInput(e)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),t.form.addresses.length>1&&s+1!==t.form.addresses.length?a("b-button",{staticClass:"mt-2",attrs:{variant:"outline-danger",size:"sm"},on:{click:function(a){return t.removeField(e)}}},[a("BIconX"),t._v(" Remove field ")],1):t._e()],1)})),1),t._t("footer",(function(){return[a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])]}))],2)},y=[],k=a(7054);a(2262),a(4506);const E={email:"email",phone:"phone",address:"address"};class x{constructor(t,e=null){this.id=t,this.type=e,this.value=null}}function w(t,e=null){const{id:a=0,type:s=e}=t.at(-1)||{},n=a+1;return new x(n,s)}const A={name:null,phones:[],emails:[],addresses:[]};var I={name:"VContactForm",components:{BIconX:k.uR$},props:{initialValues:{type:Object,default:()=>({})}},data(){return{form:{...A,...this.initialValues}}},mounted(){this.initFields()},methods:{onSubmit(){this.$emit("submit",{...this.form})},reset(){this.form={...A}},addField(t){const e=w(t);switch(e.type){case E.phone:this.form.phones=[...this.form.phones,{...e}];break;case E.address:this.form.addresses=[...this.form.addresses,{...e}];break;case E.email:this.form.emails=[...this.form.emails,{...e}];break;default:break}},initFields(){const t=w(this.form.phones||[],E.phone),e=w(this.form.emails||[],E.email),a=w(this.form.addresses||[],E.address);this.form.phones=[...this.form.phones,{...t}],this.form.addresses=[...this.form.addresses,{...a}],this.form.emails=[...this.form.emails,{...e}]},onPhoneInput(t){t.id===this.form.phones[this.form.phones.length-1].id&&this.addField(this.form.phones)},onEmailInput(t){t.id===this.form.emails[this.form.emails.length-1].id&&this.addField(this.form.emails)},onAddressInput(t){t.id===this.form.addresses[this.form.addresses.length-1].id&&this.addField(this.form.addresses)},removeField({id:t,type:e}){switch(e){case E.phone:{const e=this.form.phones.filter((e=>e.id!==t));this.form={...this.form,phones:[...e]};break}case E.email:{const e=this.form.emails.filter((e=>e.id!==t));this.form={...this.form,emails:[...e]};break}case E.address:{const e=this.form.addresses.filter((e=>e.id!==t));this.form={...this.form,addresses:[...e]};break}default:break}}}},S=I,$=(0,r.Z)(S,_,y,!1,null,null,null),D=$.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-list-group",[t._l(t.items,(function(e,s){return[a("b-list-group-item",{key:s,staticClass:"d-flex align-items-center",attrs:{to:{name:"contact",params:{id:e.id}}}},[a("b-avatar",{staticClass:"mr-3",attrs:{variant:"primary",text:e.name[0]}}),t._v(" "+t._s(e.name)+" ")],1)]}))],2)},M=[],B={name:"VContactsList",props:{items:{type:Array,default:()=>[]}}},F=B,T=(0,r.Z)(F,O,M,!1,null,null,null),V=T.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-input",{attrs:{placeholder:"Search by name",type:"search",debounce:"200",size:"lg"},model:{value:t.request,callback:function(e){t.request=e},expression:"request"}}),t.isActive?a("div",{staticClass:"mt-2"},[a("div",[a("h5",[t._v(" Searching results: «"+t._s(t.request)+"» ")])]),a("div",{staticClass:"mt-2 d-flex align-items-center"},[t._v(" Found: "+t._s(t.value.length)+" "),a("b-button",{staticClass:"ml-2",attrs:{pill:"",variant:"outline-danger",size:"sm"},on:{click:t.clear}},[a("BIconX")],1)],1)]):t._e()],1)},N=[],P={name:"VSearch",components:{BIconX:k.uR$},props:{value:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},searchByProperty:{type:String,default:null}},data(){return{request:""}},mounted(){const t=this.$route.query?.search;t&&(this.request=t)},watch:{request(t){this.search();const e=this.$route.query?.search,a=t.trim();a!==e&&this.$router.replace({...this.$route,query:{search:a}})},isActive(t){this.$emit("active",t)}},computed:{isActive(){return Boolean(this.request)}},methods:{search(){const t=this.request.trim().toLowerCase();if(""!==t){const e=this.items.filter((e=>{const a=(this.searchByProperty?e[this.searchByProperty]:e).toLowerCase();return a.includes(t||null)}));this.$emit("input",e)}},clear(){this.request=""}}},Z=P,j=(0,r.Z)(Z,q,N,!1,null,null,null),L=j.exports,z={name:"ContactsView",components:{VContactsList:V,VSearch:L,VContactForm:D},data(){return{search:{data:[],isActive:!1},isModalCreateOpen:!1}},computed:{...(0,g.Se)({contacts:"getContacts"}),contactsItems(){return(this.search.isActive?this.search.data:this.contacts.data)||[]}},methods:{...(0,g.nv)({add:"addContact"}),toggleCreateContactModal(){this.isModalCreateOpen=!this.isModalCreateOpen},onSubmitCreateContact(t){this.add({...t}),this.$refs.form.reset(),this.toggleCreateContactModal()}}},X=z,R=(0,r.Z)(X,v,C,!1,null,null,null),G=R.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"pt-5"},[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",{attrs:{cols:"auto"}},[a("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.$router.go(-1)}}},[a("BIconArrowLeft"),t._v(" Back ")],1)],1),a("b-col",{attrs:{cols:"auto"}},[a("b-button",{attrs:{variant:"outline-primary"},on:{click:t.toggleEditMode}},[t._v(" Edit ")]),a("b-button",{staticClass:"ml-3",attrs:{variant:"outline-danger"},on:{click:t.deleteContact}},[t._v("Delete")])],1)],1),t.contactData?a("b-row",{staticClass:"mt-5",attrs:{"align-v":"center"}},[a("b-col",{attrs:{cols:"auto"}},[a("b-avatar",{attrs:{variant:"primary",text:t.contactData.name[0],size:"150"}})],1),a("b-col",[a("h2",[t._v(" "+t._s(t.contactData.name)+" ")])])],1):t._e(),t.contactData.phones.length?a("b-list-group",{staticClass:"mt-4"},t._l(t.contactData.phones,(function(e){return a("b-list-group-item",{key:e.id,staticClass:"d-flex align-items-center border-right-0 border-left-0",attrs:{href:"tel:"+e.value}},[a("BIconTelephone",{staticClass:"mr-3",staticStyle:{width:"30px",height:"30px"}}),t._v(" "+t._s(e.value)+" ")],1)})),1):t._e(),t.contactData.emails.length?a("b-list-group",{staticClass:"mt-4"},t._l(t.contactData.emails,(function(e){return a("b-list-group-item",{key:e.id,staticClass:"d-flex align-items-center border-right-0 border-left-0",attrs:{href:"mailto:"+e.value}},[a("BIconEnvelope",{staticClass:"mr-3",staticStyle:{width:"30px",height:"30px"}}),t._v(" "+t._s(e.value)+" ")],1)})),1):t._e(),t.contactData.addresses.length?a("b-list-group",{staticClass:"mt-4"},t._l(t.contactData.addresses,(function(e){return a("b-list-group-item",{key:e.id,staticClass:"d-flex align-items-center border-right-0 border-left-0"},[a("BIconBuilding",{staticClass:"mr-3",staticStyle:{width:"30px",height:"30px"}}),t._v(" "+t._s(e.value)+" ")],1)})),1):t._e(),t.isEditMode?[a("b-modal",{attrs:{"hide-footer":""},model:{value:t.isEditMode,callback:function(e){t.isEditMode=e},expression:"isEditMode"}},[a("VContactForm",{ref:"editForm",attrs:{"initial-values":t.editForm},on:{submit:t.onEditSubmit},scopedSlots:t._u([{key:"footer",fn:function(){return[a("div",{staticClass:"mt-4"},[a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Edit")]),a("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:t.toggleEditMode}},[t._v(" Cancel ")])],1)]},proxy:!0}],null,!1,3681685611)})],1)]:t._e()],2)},H=[];function K(t){const e=t.emails.filter((t=>Boolean(t.value))),a=t.phones.filter((t=>Boolean(t.value))),s=t.addresses.filter((t=>Boolean(t.value)));return{emails:e,phones:a,addresses:s}}s["default"].use(g.ZP);var Q=new g.ZP.Store({state:{contacts:{data:[],currentId:1}},getters:{getContacts:t=>t.contacts,getContact:t=>e=>t.contacts.data.find((t=>t.id===e))},mutations:{ADD_CONTACT:(t,e)=>{t.contacts.data=[...t.contacts.data,e],t.contacts.currentId+=1},DELETE_CONTACT:(t,e)=>{t.contacts.data=t.contacts.data.filter((t=>t.id!==e))},EDIT_CONTACT:(t,e)=>{const a=t.contacts.data.findIndex((t=>t.id===e.id)),n=[...t.contacts.data];n[a]&&(n[a]={...e}),s["default"].set(t,"contacts",{...t.contacts,data:[...n]})}},actions:{addContact({commit:t,state:e},a){const s=e.contacts.currentId,n=K(a);t("ADD_CONTACT",{id:s,...a,...n})},editContact({commit:t},e){const a=e?.id;if(a){const a=K(e);t("EDIT_CONTACT",{...e,...a})}},deleteContact({commit:t},e){e&&t("DELETE_CONTACT",e)}}}),U={name:"ContactView",beforeRouteEnter(t,e,a){const s=Q.getters.getContacts?.data,n=Number(t.params?.id);s.some((t=>{const e=t.id;return!Number.isNaN(n)&&e===n}))?a():a({name:"index"})},components:{VContactForm:D,BIconArrowLeft:k.CJy,BIconTelephone:k.aAC,BIconEnvelope:k.AzZ,BIconBuilding:k.pGS},data(){return{isEditMode:!1,editForm:null}},computed:{...(0,g.Se)(["getContact"]),contactData(){const t=Number(this.$route.params?.id);if(t)return this.getContact(t)}},watch:{isEditMode(t){if(!t)return void(this.editForm=null);const e={},a=this.contactData.emails.map((t=>({...t}))),s=this.contactData.phones.map((t=>({...t}))),n=this.contactData.addresses.map((t=>({...t})));e.phones=[...s],e.emails=[...a],e.addresses=[...n],e.name=this.contactData.name,this.editForm=e}},methods:{...(0,g.nv)({deleteContactAction:"deleteContact",editContactAction:"editContact"}),deleteContact(){const t=this.contactData?.id;t&&(this.deleteContactAction(t),this.$router.replace({name:"index"}))},toggleEditMode(){this.isEditMode=!this.isEditMode},onEditSubmit(t){this.editContactAction({...t,id:this.contactData.id}),this.$refs.editForm.reset(),this.toggleEditMode()}}},W=U,Y=(0,r.Z)(W,J,H,!1,null,null,null),tt=Y.exports;s["default"].use(u.Z);const et=[{path:"/",name:"index",component:b,redirect:{name:"contact-list"},children:[{name:"contact-list",path:"",component:G},{name:"contact",path:":id",component:tt}]}],at=new u.Z({mode:"history",base:"/vue-contacts-list/",routes:et});var st=at,nt=a(8262),ot=a(3266);a(44);s["default"].use(nt.XG7),s["default"].use(ot.A7),s["default"].config.productionTip=!1,new s["default"]({router:st,store:Q,render:t=>t(c)}).$mount("#app")}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,s,n,o){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],n=t[u][1],o=t[u][2];for(var i=!0,l=0;l<s.length;l++)(!1&o||r>=o)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(i=!1,o<r&&(r=o));if(i){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[s,n,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,o,r=s[0],i=s[1],l=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(l)var u=l(a)}for(e&&e(s);c<r.length;c++)o=r[c],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(u)},s=self["webpackChunkvue_contacts_list"]=self["webpackChunkvue_contacts_list"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(5774)}));s=a.O(s)})();
//# sourceMappingURL=app.97ed366b.js.map